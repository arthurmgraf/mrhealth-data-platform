{
  "type": "excalidraw",
  "version": 2,
  "source": "claude-code-mrhealth",
  "elements": [
    {"id":"title","type":"text","x":40,"y":20,"width":1400,"height":40,"text":"ğŸ¥‡ BigQuery Gold Layer - Kimball Star Schema","fontSize":28,"fontFamily":3,"strokeColor":"#e67700"},
    {"id":"subtitle","type":"text","x":40,"y":65,"width":1400,"height":20,"text":"Dataset: case_ficticio_gold | Model: Kimball Dimensional | 4 Dimensions + 2 Facts + 3 Aggregations | Partitioned & Clustered","fontSize":14,"fontFamily":3,"strokeColor":"#868e96"},

    {"id":"fact_sales","type":"rectangle","x":480,"y":350,"width":340,"height":400,"strokeColor":"#c92a2a","backgroundColor":"#fff5f5","fillStyle":"solid","strokeWidth":3,"roundness":{"type":3}},
    {"id":"fact_sales_header","type":"rectangle","x":480,"y":350,"width":340,"height":45,"strokeColor":"#c92a2a","backgroundColor":"#c92a2a","fillStyle":"solid","strokeWidth":2},
    {"id":"fact_sales_title","type":"text","x":495,"y":360,"width":310,"height":28,"text":"ğŸ’° fact_sales (Order Grain)","fontSize":18,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"fact_sales_cols","type":"text","x":495,"y":410,"width":310,"height":330,"text":"ğŸ”‘ order_id           STRING         PK\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nForeign Keys:\nğŸ”— date_key           INT64          â†’ dim_date\nğŸ”— unit_key           INT64          â†’ dim_unit\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nDegenerate Dimensions:\n   order_type         STRING         ONLINE/PHYSICAL\n   order_status       STRING         Finalizado/etc\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nMeasures (Additive):\n   order_value        FLOAT64        SUM()\n   delivery_fee       FLOAT64        SUM()\n   total_items        INT64          SUM()\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nPartitioning: order_date (DATE)\nClustering: unit_key\n\nGrain: One row per ORDER","fontSize":10,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"fact_items","type":"rectangle","x":860,"y":350,"width":340,"height":400,"strokeColor":"#c92a2a","backgroundColor":"#fff5f5","fillStyle":"solid","strokeWidth":3,"roundness":{"type":3}},
    {"id":"fact_items_header","type":"rectangle","x":860,"y":350,"width":340,"height":45,"strokeColor":"#c92a2a","backgroundColor":"#c92a2a","fillStyle":"solid","strokeWidth":2},
    {"id":"fact_items_title","type":"text","x":875,"y":360,"width":310,"height":28,"text":"ğŸ“¦ fact_order_items (Item Grain)","fontSize":18,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"fact_items_cols","type":"text","x":875,"y":410,"width":310,"height":330,"text":"ğŸ”‘ item_id            STRING         PK\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nForeign Keys:\nğŸ”— order_id           STRING         â†’ fact_sales\nğŸ”— date_key           INT64          â†’ dim_date\nğŸ”— unit_key           INT64          â†’ dim_unit\nğŸ”— product_key        INT64          â†’ dim_product\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nDegenerate Dimensions:\n   order_type         STRING\n   order_status       STRING\n   observation        STRING\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nMeasures (Additive):\n   quantity           INT64          SUM()\n   unit_price         FLOAT64        AVG()\n   total_item_value   FLOAT64        SUM()\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nPartitioning: order_date\nClustering: product_key\n\nGrain: One row per LINE ITEM","fontSize":10,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"dim_date","type":"rectangle","x":40,"y":120,"width":280,"height":350,"strokeColor":"#2f9e44","backgroundColor":"#ebfbee","fillStyle":"solid","strokeWidth":2,"roundness":{"type":3}},
    {"id":"dim_date_header","type":"rectangle","x":40,"y":120,"width":280,"height":40,"strokeColor":"#2f9e44","backgroundColor":"#2f9e44","fillStyle":"solid","strokeWidth":2},
    {"id":"dim_date_title","type":"text","x":55,"y":130,"width":250,"height":25,"text":"ğŸ“… dim_date","fontSize":16,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"dim_date_cols","type":"text","x":55,"y":175,"width":250,"height":285,"text":"ğŸ”‘ date_key           INT64    PK\n   (format: YYYYMMDD)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nDate Attributes:\n   full_date          DATE\n   year               INT64\n   quarter            INT64\n   month              INT64\n   month_name         STRING\n   year_month         STRING\n   day_of_week        INT64    (1-7)\n   day_of_week_name   STRING\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nFlags:\n   is_weekend         BOOL\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nGenerated: GENERATE_DATE_ARRAY\nRange: 2025-01-01 to 2027-12-31\nRows: 1,096 dates","fontSize":10,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"dim_product","type":"rectangle","x":360,"y":120,"width":280,"height":200,"strokeColor":"#2f9e44","backgroundColor":"#ebfbee","fillStyle":"solid","strokeWidth":2,"roundness":{"type":3}},
    {"id":"dim_product_header","type":"rectangle","x":360,"y":120,"width":280,"height":40,"strokeColor":"#2f9e44","backgroundColor":"#2f9e44","fillStyle":"solid","strokeWidth":2},
    {"id":"dim_product_title","type":"text","x":375,"y":130,"width":250,"height":25,"text":"ğŸ• dim_product","fontSize":16,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"dim_product_cols","type":"text","x":375,"y":175,"width":250,"height":135,"text":"ğŸ”‘ product_key        INT64    PK\n   product_id         INT64    NK\n   product_name       STRING\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nSCD Type 2 Ready:\n   _valid_from        TIMESTAMP\n   _valid_to          TIMESTAMP\n   is_current         BOOL\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nRows: ~200 products","fontSize":10,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"dim_unit","type":"rectangle","x":680,"y":120,"width":280,"height":200,"strokeColor":"#2f9e44","backgroundColor":"#ebfbee","fillStyle":"solid","strokeWidth":2,"roundness":{"type":3}},
    {"id":"dim_unit_header","type":"rectangle","x":680,"y":120,"width":280,"height":40,"strokeColor":"#2f9e44","backgroundColor":"#2f9e44","fillStyle":"solid","strokeWidth":2},
    {"id":"dim_unit_title","type":"text","x":695,"y":130,"width":250,"height":25,"text":"ğŸª dim_unit","fontSize":16,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"dim_unit_cols","type":"text","x":695,"y":175,"width":250,"height":135,"text":"ğŸ”‘ unit_key           INT64    PK\n   unit_id            INT64    NK\n   unit_name          STRING\n   state_id/name      INT64/STRING\n   country_id/name    INT64/STRING\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nSCD Type 2: _valid_from/to, is_current\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nRows: 50 restaurant units","fontSize":10,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"dim_geography","type":"rectangle","x":1000,"y":120,"width":280,"height":200,"strokeColor":"#2f9e44","backgroundColor":"#ebfbee","fillStyle":"solid","strokeWidth":2,"roundness":{"type":3}},
    {"id":"dim_geography_header","type":"rectangle","x":1000,"y":120,"width":280,"height":40,"strokeColor":"#2f9e44","backgroundColor":"#2f9e44","fillStyle":"solid","strokeWidth":2},
    {"id":"dim_geography_title","type":"text","x":1015,"y":130,"width":250,"height":25,"text":"ğŸŒ dim_geography","fontSize":16,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"dim_geography_cols","type":"text","x":1015,"y":175,"width":250,"height":135,"text":"ğŸ”‘ geography_key      INT64    PK\n   state_id           INT64\n   state_name         STRING\n   country_id         INT64\n   country_name       STRING\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nGrain: One row per STATE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nRows: 3 (RS, SC, PR)","fontSize":10,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"fk_date_sales","type":"arrow","x":320,"y":350,"width":160,"height":100,"strokeColor":"#087f5b","strokeWidth":2,"points":[[0,0],[80,50],[160,100]],"endArrowhead":"arrow"},
    {"id":"fk_date_items","type":"arrow","x":320,"y":350,"width":540,"height":100,"strokeColor":"#087f5b","strokeWidth":2,"points":[[0,0],[270,50],[540,100]],"endArrowhead":"arrow"},
    {"id":"fk_product_items","type":"arrow","x":500,"y":320,"width":460,"height":30,"strokeColor":"#087f5b","strokeWidth":2,"points":[[0,0],[230,15],[460,30]],"endArrowhead":"arrow"},
    {"id":"fk_unit_sales","type":"arrow","x":820,"y":320,"width":-160,"height":30,"strokeColor":"#087f5b","strokeWidth":2,"points":[[0,0],[-80,15],[-160,30]],"endArrowhead":"arrow"},
    {"id":"fk_unit_items","type":"arrow","x":820,"y":320,"width":140,"height":30,"strokeColor":"#087f5b","strokeWidth":2,"points":[[0,0],[70,15],[140,30]],"endArrowhead":"arrow"},

    {"id":"agg_section","type":"rectangle","x":40,"y":780,"width":1240,"height":280,"strokeColor":"#7048e8","backgroundColor":"#f3f0ff","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_title","type":"text","x":60,"y":795,"width":400,"height":25,"text":"ğŸ“ˆ Pre-Aggregated KPI Tables","fontSize":18,"fontFamily":3,"strokeColor":"#7048e8"},

    {"id":"agg_daily","type":"rectangle","x":60,"y":835,"width":380,"height":210,"strokeColor":"#7048e8","backgroundColor":"#ffffff","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_daily_header","type":"rectangle","x":60,"y":835,"width":380,"height":35,"strokeColor":"#7048e8","backgroundColor":"#7048e8","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_daily_title","type":"text","x":75,"y":843,"width":350,"height":22,"text":"ğŸ“… agg_daily_sales","fontSize":14,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"agg_daily_cols","type":"text","x":75,"y":880,"width":350,"height":155,"text":"date_key, order_date, year, month, month_name\nyear_month, day_of_week_name, is_weekend\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\ntotal_orders, online_orders, physical_orders\ntotal_revenue, online_revenue, physical_revenue\navg_order_value, total_delivery_fees\ntotal_items_sold, avg_items_per_order\nactive_units, completed/canceled/pending_orders\nonline_pct, cancellation_rate\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nGrain: One row per DATE | Use: Daily trends","fontSize":9,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"agg_unit","type":"rectangle","x":460,"y":835,"width":380,"height":210,"strokeColor":"#7048e8","backgroundColor":"#ffffff","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_unit_header","type":"rectangle","x":460,"y":835,"width":380,"height":35,"strokeColor":"#7048e8","backgroundColor":"#7048e8","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_unit_title","type":"text","x":475,"y":843,"width":350,"height":22,"text":"ğŸª agg_unit_performance","fontSize":14,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"agg_unit_cols","type":"text","x":475,"y":880,"width":350,"height":155,"text":"unit_key, unit_id, unit_name, state_name, country_name\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\ntotal_orders, online_orders, physical_orders\ntotal_revenue, avg_order_value\ntotal_items_sold, avg_items_per_order\ncompleted_orders, canceled_orders\ncancellation_rate, online_pct\nfirst_order_date, last_order_date, days_active\nrevenue_rank, order_volume_rank\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nGrain: One row per UNIT | Use: Unit comparison","fontSize":9,"fontFamily":3,"strokeColor":"#495057"},

    {"id":"agg_product","type":"rectangle","x":860,"y":835,"width":400,"height":210,"strokeColor":"#7048e8","backgroundColor":"#ffffff","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_product_header","type":"rectangle","x":860,"y":835,"width":400,"height":35,"strokeColor":"#7048e8","backgroundColor":"#7048e8","fillStyle":"solid","strokeWidth":2},
    {"id":"agg_product_title","type":"text","x":875,"y":843,"width":370,"height":22,"text":"ğŸ• agg_product_performance","fontSize":14,"fontFamily":3,"strokeColor":"#ffffff"},
    {"id":"agg_product_cols","type":"text","x":875,"y":880,"width":370,"height":155,"text":"product_key, product_id, product_name\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\ntotal_orders, total_line_items\ntotal_quantity_sold, avg_quantity_per_order\ntotal_revenue, avg_unit_price, avg_line_value\nunits_selling_product, unit_penetration_pct\nfirst_sold_date, last_sold_date\nrevenue_rank, volume_rank\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nGrain: One row per PRODUCT | Use: Product mix analysis","fontSize":9,"fontFamily":3,"strokeColor":"#495057"}
  ],
  "appState": {"viewBackgroundColor":"#ffffff","gridSize":null},
  "files": {}
}
